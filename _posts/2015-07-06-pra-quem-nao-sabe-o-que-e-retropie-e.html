---
layout: post
title: 'RetroPie 3.0: configuração de controles distintas para jogos de luta SNK e
  CAPCOM'
date: '2015-07-06T23:33:00.000-03:00'
author: Meleu Zord
tags:
- neogeo
- retropie
- fba
- games
- emulationstation
- jogos
- raspberry pi
modified_time: '2015-07-15T22:58:41.453-03:00'
blogger_id: tag:blogger.com,1999:blog-1613465446497619833.post-9004026733378655198
blogger_orig_url: http://mdicas.blogspot.com/2015/07/pra-quem-nao-sabe-o-que-e-retropie-e.html
---

Pra quem não sabe o que é RetroPie e nem Raspberry Pi, eu recomendo uma visita nos seguintes links:<br /><a href="http://blog.petrockblock.com/retropie/">http://blog.petrockblock.com/retropie/</a><br /><a href="https://www.raspberrypi.org/">https://www.raspberrypi.org/</a><br /><br /><b>OBSERVAÇÃO:</b><br />Como o RetroPie é um projeto relativamente novo, algumas coisas estão mudando assim que novas versões são lançadas, como por exemplo arquivos de configuração e os seus respectivos diretórios. Então é bom frisar que o esquema explicado aqui foi realizado no RetroPie 3.0 beta 4 (também testei no 2.6, mas alguns diretórios são diferentes).<br /><br /><h3>PROBLEMA</h3>No RetroPie o emulador utilizado para a maioria dos jogos de luta de arcade é FinalBurn Alpha (ou fba, ou ainda pifba, como a versão para Raspberry Pi é chamada). Só que diferentemente do MAME, o FBA não tem como configurar os controles individualmente por jogo. E aí que começa o meu problema. Pois eu costumo jogar num controle de PlayStation2, utilizando o seguinte esquema:<br /><br />quadrado: soco fraco<br />triângulo: soco forte<br />xis: chute fraco<br />bola: chute forte<br />R1: soco médio [CAPCOM]<br />R2: chute médio [CAPCOM]<br /><br />O problema é que nos games CAPCOM temos o soco/chute médio, e nos games SNK não temos. Aí a configuração que eu considero ideal para um já não fica legal no outro. Pois aqui vou descrever como contornar este problema.<br /><br /><h3>SOLUÇÃO</h3><h4>passo 1</h4><ul><li>Colocar as roms dos jogos SNK no diretório "/home/pi/RetroPie/roms/neogeo". No meu caso foram as várias edições de Art of Fighting, Samurai Shodown, Metal Slug, Fatal Fury e King of Fighters. O sistema vai continuar executando o pifba para jogar estas roms, mas fazendo desta forma o emulationstation vai ficar mais organizadinho. </li></ul><ul><li>Colocar as roms CAPCOM no diretório "/home/pi/RetroPie/roms/fba". No meu caso foram os Street Fighter da vida, Marvel vs Capcom, X-Men vs Street Fighter (infelizmente não rodou Street Fighter 3).</li></ul><br /><h4>passo 2</h4>Criar dois arquivos de configuração distintos para SNK e CAPCOM.<br /><br />Um vai se chamar "/opt/retropie/configs/fba/fba2x.cfg-neogeo":<br /><br /><code><br />### meleu: ARQUIVO DE CONFIGURACAO DOS BOTOES PARA JOGAR JOGOS DA SNK ###<br />#########################################################################<br />[Keyboard]<br /># Get codes from /usr/include/SDL/SDL_keysym.h<br />A_1=306<br />B_1=32<br />X_1=308<br />Y_1=304<br />L_1=122<br />R_1=120<br />START_1=13<br />SELECT_1=9<br />LEFT_1=276<br />RIGHT_1=275<br />UP_1=273<br />DOWN_1=274<br />QUIT=27<br />#player 2 keyboard controls, disabled by default<br />A_2=999<br />B_2=999<br />X_2=999<br />Y_2=999<br />L_2=999<br />R_2=999<br />START_2=999<br />SELECT_2=999<br />LEFT_2=999<br />RIGHT_2=999<br />UP_2=999<br />DOWN_2=999<br /><br />[Joystick]<br /># Get codes from "jstest /dev/input/js0"<br /># from package "joystick"<br /># quadrado = soco fraco<br />A_1=3<br /># triangulo = soco forte<br />B_1=0<br /># xis = chute fraco<br />X_1=2<br /># bolinha = chute forte<br />Y_1=1<br />L_1=7<br />R_1=5<br />START_1=9<br />SELECT_1=8<br />#Joystick axis<br />JA_LR=0<br />JA_UD=1<br />#player 2 button configuration<br />A_2=3<br />B_2=0<br />X_2=2<br />Y_2=1<br />L_2=7<br />R_2=5<br />START_2=9<br />SELECT_2=8<br />#Joystick axis<br />JA_LR_2=0<br />JA_UD_2=1<br /><br />[Graphics]<br />DisplaySmoothStretch=1<br /># Display Effect: 0 none, 1 scanlines<br />DisplayEffect=0<br />DisplayBorder=0<br />MaintainAspectRatio=1<br /><br />[Sound]</code><code><br />### FINAL DO ARQUIVO ###</code><br /><br />O outro arquivo vai se chamar&nbsp; "/opt/retropie/configs/fba/fba2x.cfg-capcom":<br /><br /><code>### meleu: ARQUIVO DE CONFIGURACAO DOS BOTOES PARA JOGAR JOGOS DA CAPCOM ###<br />############################################################################<br />[Keyboard]<br /># Get codes from /usr/include/SDL/SDL_keysym.h<br />A_1=306<br />B_1=32<br />X_1=308<br />Y_1=304<br />L_1=122<br />R_1=120<br />START_1=13<br />SELECT_1=9<br />LEFT_1=276<br />RIGHT_1=275<br />UP_1=273<br />DOWN_1=274<br />QUIT=27<br />#player 2 keyboard controls, disabled by default<br />A_2=999<br />B_2=999<br />X_2=999<br />Y_2=999<br />L_2=999<br />R_2=999<br />START_2=999<br />SELECT_2=999<br />LEFT_2=999<br />RIGHT_2=999<br />UP_2=999<br />DOWN_2=999<br /><br />[Joystick]<br /># Get codes from "jstest /dev/input/js0"<br /># from package "joystick"<br />### meleu: lembrando que eu costumo utilizar um controle de ps2<br /># A = soco fraco = quadrado<br />A_1=3<br /># B = soco forte = triangulo<br />B_1=0<br /># X = soco medio = R1<br />X_1=7<br /><br /># Y = chute fraco = xis<br />Y_1=2<br /># L = chute médio = R2<br />L_1=5<br /># R = chute forte = bola<br />R_1=1<br /><br />START_1=9<br />SELECT_1=8<br />#Joystick axis<br />JA_LR=0<br />JA_UD=1<br />#player 2 button configuration<br />A_2=3<br />B_2=0<br />X_2=7<br />Y_2=2<br />L_2=5<br />R_2=1<br />START_2=9<br />SELECT_2=8<br />#Joystick axis<br />JA_LR_2=0<br />JA_UD_2=1<br /><br />[Graphics]<br />DisplaySmoothStretch=1<br /># Display Effect: 0 none, 1 scanlines<br />DisplayEffect=0<br />DisplayBorder=0<br />MaintainAspectRatio=1<br /><br />[Sound]<br />### FINAL DO ARQUIVO ###<br /></code> <br /><h4>passo 3</h4>Mudar o dono do arquivo "/opt/retropie/configs/fba/fba2x.cfg", executando o seguinte comando:<br /><br /><code> chown pi.pi /opt/retropie/configs/fba/fba2x.cfg<br /> </code><br /><br />Isso vai permitir que possamos alterar este arquivo no esquema seguir.<br /><br /><h4>passo 4</h4>Copiar o arquivo "/etc/emulationstation/es_systems.cfg" para seu diretório pessoal, executando o seguinte comando:<br /><br /><code> cp /etc/emulationstation/es_systems.cfg ~/.emulationstation/es_systems.cfg<br /><br /> </code><br /><h4>passo 5</h4>O es_systems.cfg é um arquivo XML relativamente fácil de entender. Primeiro vamos procurar pela entrada referente ao neogeo. Estará algo assim:<br /><pre>...<br />  &lt;system&gt;<br />    &lt;name&gt;neogeo&lt;/name&gt;<br />    &lt;fullname&gt;Neo Geo&lt;/fullname&gt;<br />    &lt;path&gt;~/RetroPie/roms/neogeo&lt;/path&gt;<br />    &lt;extension&gt;.zip .fba .ZIP .FBA&lt;/extension&gt;<br />    &lt;command&gt;/opt/retropie/supplementary/runcommand/runcommand.sh 0 _SYS_ neogeo %ROM%&lt;/command&gt;<br />    &lt;platform&gt;neogeo&lt;/platform&gt;<br />    &lt;theme&gt;neogeo&lt;/theme&gt;<br />  &lt;/system&gt;<br />...<br /></pre><br />Na linha <command></command> <command></command> <command></command> nós vamos alterar para o seguinte:<br /><br /><pre>&lt;command&gt;(cd /opt/retropie/configs/fba/ && cat fba2x.cfg-neogeo &gt; fba2x.cfg) && /opt/retropie/supplementary/runcommand/runcommand.sh 0 _SYS_ neogeo %ROM%&lt;/command&gt;</pre><br />Em seguida vamos fazer a mesma coisa com a entrada referente ao fba. Ela estará assim:<br /><br /><pre>...<br />  &lt;system&gt;<br />    &lt;name&gt;fba&lt;/name&gt;<br />    &lt;fullname&gt;Final Burn Alpha&lt;/fullname&gt;<br />    &lt;path&gt;~/RetroPie/roms/fba&lt;/path&gt;<br />    &lt;extension&gt;.fba .zip .FBA .ZIP&lt;/extension&gt;<br />    &lt;command&gt;/opt/retropie/supplementary/runcommand/runcommand.sh 0 _SYS_ fba %ROM%&lt;/command&gt;<br />    &lt;platform&gt;arcade&lt;/platform&gt;<br />    &lt;theme&gt;fba&lt;/theme&gt;<br />  &lt;/system&gt;<br />...<br /><br /></pre><br />Alterar a linha <command></command> <command></command> para o seguinte:<br /><br /><pre>&lt;command&gt;(cd /opt/retropie/configs/fba/ && cat fba2x.cfg-capcom &gt; fba2x.cfg) && /opt/retropie/supplementary/runcommand/runcommand.sh 0 _SYS_ fba %ROM%&lt;/command&gt;<br /></pre><br /><h4>passo 6 [OPCIONAL]</h4>Aproveite para eliminar do emulationstation os sistemas que você não usa (por exemplo amiga, macintosh, apple II, ScummVM, etc) basta comentar a entrada referente a estes sistemas usando &lt;!-- e --&gt;, como no exemplo abaixo<br /><br /><pre>...<br />&lt;!-- ## SISTEMAS QUE NÃO QUERO QUE APAREÇA ##<br />     ########################################<br />  &lt;system&gt;<br />    &lt;name&gt;amiga&lt;/name&gt;<br />    &lt;fullname&gt;Amiga&lt;/fullname&gt;<br />    &lt;path&gt;~/RetroPie/roms/amiga&lt;/path&gt;<br />    &lt;extension&gt;.sh .SH&lt;/extension&gt;<br />    &lt;command&gt;/opt/retropie/supplementary/runcommand/runcommand.sh 0 _SYS_ amiga %ROM%&lt;/command&gt;<br />    &lt;platform&gt;amiga&lt;/platform&gt;<br />    &lt;theme&gt;amiga&lt;/theme&gt;<br />  &lt;/system&gt;<br />--&gt;<br />...<br /></pre> <br /><h4>finalizando</h4>Reiniciar o emulationstation e pronto!