---
layout: post
title: cygwin no pendrive
date: '2008-06-06T21:06:00.004-03:00'
author: Meleu Zord
tags:
- cygwin
modified_time: '2014-06-08T14:21:20.387-03:00'
blogger_id: tag:blogger.com,1999:blog-1613465446497619833.post-5058446040275285450
blogger_orig_url: http://mdicas.blogspot.com/2008/06/cygwin-no-pendrive.html
---

Se você está lendo isso, provavelmente já sabe o que é o cygwin. Caso não saiba dê uma olhada em <a href="http://aurelio.net/cygwin/">http://aurelio.net/cygwin/</a>.<br /><br /><span style="font-size: large;"><b>ATENÇÃO! Esta dica não funciona mais! Quando eu conseguir solucionar este problema atualizarei isso aqui.</b></span><br /><br />A motivação de usar o cygwin é uma (ou várias juntas) das seguintes:<br /><br /><li> você tem medo de instalar o Linux na sua máquina;</li><li> você tem medo de particionar seu HD;</li><li> você não quer/não conhece o VMware;</li><li> você é obrigado a usar o Windows (trabalho/escola).<br /><br />Ainda existe uma vertente deste último caso que é a seguinte:</li><li> você é obrigado a usar o Windows e a política de TI da sua instituição não permite a instalação de softwares, se você desrespeitar pode ser penalizado ou o acesso cortado (ou alguma punição do tipo).<br /><br />Caso você se enquadre especialmente neste último caso, este texto é para você. Seguindo o que está descrito aqui você irá instalar o cygwin em um pendrive e poderá usá-lo em qualquer computador que plugá-lo. Isso mesmo!  poderá executar o cygwin em computadores que não possuem ele instalado!  <br /><br />Vale ressaltar que alguns pendrives tem tempo de acesso um pouco lento o que poderá ser um pouco irritante para quem é impaciente...<br /><br />Chega de blablabla, vamos pôr a mão na massa!<br /><br />Você vai precisar de:</li><li> Um computador onde você possa instalar o cygwin inicialmente (chamemos este computador de maquina1);</li><li> Um pendrive de 512MB atende tranquilamente a usuários medianos;</li><li> Outros computadores para plugar o pendrive e usar o cygwin ;-)<br /><br /><br /><b><u>Passo 1:</u></b><br />Instale o cygwin do jeito que você bem entender na sua maquina1. Não cobrirei aqui como é feita a instalação. Se não sabe fazer isso consulte as referências.<br /><br /><br /><b><u>Passo 2:</u></b><br />Após instalar copie inteiramente o diretório que você definiu como raiz (Root Directory) e cole na raiz do seu pendrive. Este diretório deve se chamar cygwin. Por exemplo: se você plugou o pendrive na maquina1 e a unidade do pendrive se chama 'E:', você deve colar o conteúdo do diretório raiz em 'E:\cygwin'.<br /><br />Só para deixar bem claro, após a cópia dos arquivos devem existir os diretórios 'E:\cygwin\bin', 'E:\cygwin\lib', 'E:\cygwin\usr', 'E:\cygwin\etc', e etc. Ah! E o mais importante, o arquivo 'E:\cygwin\cygwin.bat'.<br /><br />Lembrando: o drive E: é só um exemplo!<br /><br /><br /><b><u>Passo 3:</u></b><br /><br />Abra o arquivo \cygwin\cygwin.bat do seu pendrive para edição, apague o que estiver lá, copie e cole o que está a seguir (abaixo do &lt;++&gt; e acima do <-->):<br /><br /><blockquote><br />&lt;++&gt; cygwin.bat<br />@echo off<br /><br />echo Configurando o ambiente...<br />set drive=%CD:~,2%<br />set desmonta=%drive%\cygwin\usr\local\etc\desmontar.bat<br /><br />set user=user<br />set home=%drive%\cygwin\home\user<br />set path=%drive%\cygwin\bin;%path%<br /><br />chdir %drive%\cygwin\bin<br /><br />echo umount -s --remove-all-mounts &gt; %desmonta%<br />mount -m &gt;&gt; %desmonta%<br /><br />umount -u --remove-all-mounts<br />mount -u -b -f %drive%/cygwin/bin /usr/bin<br />mount -u -b -f %drive%/cygwin/lib /usr/lib<br />mount -u -b -f %drive%/cygwin/ /<br />mount -c -u /cygdrive<br /><br />chdir %drive%\cygwin\home\user<br /><br />echo Entrando no bash...<br />bash --login -i<br /><br />echo Saindo do cygwin e restaurando o ambiente...<br />%desmonta%<br />&lt;--&gt;</blockquote><br /><br />Conheço pouquíssimo de programação .bat, e esse pouquíssimo que sei só aprendi devido a este desejo de executar o cygwin a partir do pendrive. Portanto não vou ficar explicando o que este cygwin.bat faz, até porque está bem intuitivo.<br /><br />Só gostaria de deixar claro que toda essa parafernália de %desmonta% serve tão somente para não bagunçar uma instalação local do cygwin.  Explicando melhor: o %desmonta% serve para que quando você executar o cygwin a partir do pendrive em uma maquina que já tenha o cygwin instalado, este cygwin da máquina não fique bagunçado (diretórios montados em pontos errados).<br /><br /><br /><b><u>Passo 4:</u></b><br />É necessário garantir que todos tenham acesso ao %desmonta%, ou seja '\cygwin\usr\local\etc\desmontar.bat' no seu pendrive. Isso pode ser feito com o cygwin do pendrive já em execução:<br /><br /><blockquote><br />prompt$ chmod 777 /usr/local/etc/desmontar.bat</blockquote><br /><br />Isto serve para que não se tenha problemas de acesso ao desmontar.bat quando você executar o cygwin do pendrive em um computador como o usuario fulano, e depois que acabar o usuário siclano quiser usar. Se não fizer o isso o siclano terá acesso negado ao desmontar.bat quando quiser salvar seus "mount points" durante o "cygwin.bat".<br /><br /><br /><b><u>Passo 5:</u></b><br />Desplugar o pendrive com segurança. Plugar no(s) computador(es) do seu trabalho/colégio/faculdade, abrir a "pasta" cygwin no seu pendrive e dar um duplo clique no "cygwin.bat". O resto é só alegria!<br /><br /><br /><b><u>Referências</u></b><br /><a href="http://aurelio.net/cygwin/">http://aurelio.net/cygwin/</a> - portal brasileiro de cygwin<br /><br /><a href="http://forums.qj.net/archive/index.php/t-138434.html">http://forums.qj.net/archive/index.php/t-138434.html</a> - tem um cygwin.bat de um tal de sakya, usei-o como ponto de partida<br /><br />manpage do mount no cygwin - explica como usar o mount no cygwin<br /><br />help set no command.com - explica como fazer a substituição de variáveis nos arquivos .bat<!------></--></li>