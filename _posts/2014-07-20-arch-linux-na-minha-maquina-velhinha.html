---
layout: post
title: Arch Linux na minha maquina velhinha - configurando wifi
date: '2014-07-20T13:01:00.004-03:00'
author: Meleu Zord
tags:
- arch linux
- Linux
- wifi
modified_time: '2014-07-22T23:12:42.198-03:00'
blogger_id: tag:blogger.com,1999:blog-1613465446497619833.post-3821212150661370683
blogger_orig_url: http://mdicas.blogspot.com/2014/07/arch-linux-na-minha-maquina-velhinha.html
---

Eu tenho um computador meio velhinho aqui e ao invés de jogá-lo fora eu quero ver o que ele pode fazer com Arch Linux instalado. A ideia inicial é tentar deixá-lo com a cara minimalista da distribuição "<a href="http://crunchbang.org/" target="_blank">crunchbang!</a>", mas durante o percurso a gente vai descobrindo tanta coisa que esse objetivo pode ir se desvirtuando... :-)<br /><br />O computador é um HP Pavilion ZE 2220br. Eis as duas características mais importantes:<br />Processador: 1,4 GHz Intel® Celeron® M 360<br />RAM: 1GB<br />As especificações detalhadas encontram-se aqui: <a href="http://h10025.www1.hp.com/ewfrf/wc/document?docname=c00659183&amp;lc=pt&amp;cc=br&amp;dlc=pt&amp;product=1124223&amp;lang=pt#N786">http://h10025.www1.hp.com/ewfrf/wc/document?docname=c00659183&amp;lc=pt&amp;cc=br&amp;dlc=pt&amp;product=1124223&amp;lang=pt#N786</a> (a única diferença é que eu coloquei mais RAM).<br /><br />A instalação do Arch Linux foi tranquila, fiz o que descrevo no meu post anterior &lt;<a href="http://mdicas.blogspot.com.br/2014/06/instalacao-basica-do-arch-linux.html">http://mdicas.blogspot.com.br/2014/06/instalacao-basica-do-arch-linux.html</a>&gt;. Tive que fazer pela conexão cabeada, pois o wifi não funcionou de cara. Não utilizei proxy.<br /><br />Lembrando que este post não é muito detalhado. É tudo resumido e sem muitas explicações. Mas como quase tudo que faço aqui é baseado no que aprendo no ArchWiki, vou sempre colocar um link para o wiki de onde tirei as informações. Se você precisa de mais detalhes, é só ir direto na fonte. ;-)<br /><br /><h3><b>Primeira etapa - operando remotamente via SSH</b></h3>Fonte de informação: <a href="https://wiki.archlinux.org/index.php/Install_from_SSH">https://wiki.archlinux.org/index.php/Install_from_SSH</a><br /><br />IMPORTANTE! Isso só é possível com o roteador já devidamente configurado e funcionando corretamente.<br /><br />Para eu utilizar a conexão cabeada o computador ficou num lugar muito ruim de operar. Portanto optei por operá-lo remotamente de um outro computador. E para tornar isso possível devemos fazer o seguinte:<br /><br />- Certificar-se de que temos instalado os pacotes dhcpcd e openssh:<br /><br /># pacman -S dhcpcd openssh<br /><br />- Conectar o cabo de rede no computador.<br /><br />- Obter um endereço do roteador e ativar o daemon do OpenSSH.<br /><br /># dhcpcd<br /># systemctl start sshd<br /><br />- Anotar o endereço IP para acessá-lo de outra máquina. Usar o ifconfig já resolve. ;-)<br /><br />Agora já estamos prontos para acessar este computador de outra máquina.<br /><br /><br /><h3><b>Segunda etapa - configurando o dispositivo wifi</b></h3>Fontes de informação:<br /><a href="https://wiki.archlinux.org/index.php/B43">https://wiki.archlinux.org/index.php/B43</a><br /><a href="http://wireless.kernel.org/en/users/Drivers/b43">http://wireless.kernel.org/en/users/Drivers/b43</a><br /><a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration">https://wiki.archlinux.org/index.php/Wireless_network_configuration</a><br /><br />IMPORTANTE! Se sua placa de rede wifi já funcionou de primeira isso aqui não será necessário.<br /><br />- Descobrir qual é a placa de rede que tenho:<br /><br /># lspci -vnn -d 14e4:<br /><br />Isso me forneceu a informação de que a minha placa é uma "Broadcom Corporation BCM4318 [AirForce One 54g] 802.11g Wireless LAN Controller [14e4:4318]".<br /><br />- Instalar os seguintes pacotes:<br /><br /># pacman -S b43-fwcutter rfkill<br /><br />- baixar o driver, descompactar e instalar<br /><br /># wget http://www.lwfinger.com/b43-firmware/broadcom-wl-5.100.138.tar.bz2<br /># tar xjf broadcom-wl-5.100.138.tar.bz2<br /># b43-fwcutter -w /lib/firmware broadcom-wl-5.100.138/linux/wl_apsta.o<br /><br />Se o led que indica que a placa de rede está ativada não acender, talvez seja a hora de usar o rfkill. Para mostrar o status atual:<br /><br /># rfkill list<br /><br />Se a placa estiver "Hard blocked: yes", basta apertar o botão do wifi no seu computador para desbloqueá-la. Execute novamente o comando acima para verificar se desta vez vai estar "Hard blocked: no". Se sim, basta executar:<br /><br /># rfkill unblock wifi<br /><br />Se tudo der certo basta executar o wifi-menu e escolher sua rede.<br /><br />OBS.: para usar wifi-menu é necessário instalar os pacotes wireless_tools, wpa_supplicant, netctl e dialog. Se esses pacotes não foram adicionados durante a instalação do sistema, essa é a hora (executar o comando mesmo com os pacotes já instalados não causa dano algum).<br /><br /># pacman -S wireless_tools wpa_supplicant netctl dialog.<br /><br />Pronto! Agora já tenho rede sem fio funcionando e posso usar o computador num lugar mais confortável. No próximo post continuamos... ;-)<br /><br />P.S.: Ei sei que existe o <a href="http://wiki.archbang.org/" target="_blank">ArchBang!</a>, que é uma tentativa de deixar o Arch com cara de crunchbang! já na instalação. Cheguei a testá-lo e não gostei muito. Como eu ia ter que configurar muita coisa para deixar do meu gosto, acabei decidindo começar do zero.